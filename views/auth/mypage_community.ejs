<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìš”ë¦¬ì¡°ë¦¬_ë§ˆì´í˜ì´ì§€</title>
    <link rel="stylesheet" href="/css/auth/mypage_main.css">
</head>
<body>
    <div class="container">
        <div class="inincontainer">
            <div class="mypage-main">ë§ˆì´í˜ì´ì§€ > ì»¤ë®¤ë‹ˆí‹° í™œë™</div>
            <div class="incontainer">
                <div class="menu-bar">
                    <div class="menu-bar-option"><a href="/auth/mypage">ë‚˜ì˜ ë ˆì‹œí”¼</a></div>
                    <div class="menu-bar-option"><a href="/auth/mypageComment">ëŒ“ê¸€</a></div>
                    <div class="menu-bar-option"><a href="/auth/mypageScrap">ìŠ¤í¬ë©</a></div>
                    <hr class="custom-hr">
                    <div class="menu-bar-option"><p>í€ë”©</p></div>
                    <div class="menu-bar-option"><a href="/auth/mypageMyFunding">ë‚´ê°€ ì—° í€ë”©</a></div>
                    <div class="menu-bar-option"><a href="/auth/mypageParticipatedFunding">ë‚´ê°€ ì°¸ì—¬í•œ í€ë”©</a></div>
                    <hr class="custom-hr">
                    <div class="myprofile">
                        <div class="profileimage">
                            <img src="<%= result.imageUrl %>" alt="profileImage" class="img">
                        </div>
                        <div class="Nickname"><%= result.nickname %></div>
                        <div class="buttonbox"><button class="btn-block" type="button" onclick="showPopup()">í¸ì§‘</button></div>
                        <div class="buttonbox"><a href="/auth/logout"><button class="btn-block" type="button">ë¡œê·¸ì•„ì›ƒ</button></a></div>
                    </div>
                </div>

                <div class="mainbox">
                    <h2>ğŸ“Œ ë‚´ê°€ ì“´ ê¸€</h2>
                    <% if (posts.length > 0) { %>
                        <% posts.forEach(post => { %>
                            <a href="/write/getWritedPage?postId=<%= post.postId %>">
                                <div class="mypost">
                                    <h3><%= post.title %></h3>
                                    <p><%= post.createdAt %></p>
                                    <p><%= post.content %></p>
                                </div>
                            </a>
                        <% }) %>
                    <% } else { %>
                        <p>ì‘ì„±í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <% } %>

                    <h2>ğŸ’¬ ë‚´ê°€ ë‹¨ ëŒ“ê¸€</h2>
                    <% if (comments.length > 0) { %>
                        <% comments.forEach(comment => { %>
                            <div class="mypost">
                                <p><strong>ê²Œì‹œê¸€:</strong> <%= comment.postTitle %></p>
                                <p><%= comment.content %></p>
                                <p><%= comment.createdAt %></p>
                            </div>
                        <% }) %>
                    <% } else { %>
                        <p>ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <% } %>

                    <h2>ğŸ“ ìŠ¤í¬ë©í•œ ê¸€</h2>
                    <% if (scraps.length > 0) { %>
                        <% scraps.forEach(scrap => { %>
                            <a href="/write/getWritedPage?postId=<%= scrap.postId %>">
                                <div class="mypost">
                                    <h3><%= scrap.title %></h3>
                                    <p><%= scrap.createdAt %></p>
                                </div>
                            </a>
                        <% }) %>
                    <% } else { %>
                        <p>ìŠ¤í¬ë©í•œ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <% } %>
                </div>
            </div>
        </div>
    </div>

    <!-- íŒì—… ë°°ê²½ -->
    <div class="popup-bg" id="popup-bg" onclick="closePopup()"></div>

    <!-- íŒì—… ë‚´ìš© -->
    <div class="popup" id="popup">
        <h2>í”„ë¡œí•„ í¸ì§‘</h2>
        <form class="form-signin" action="/auth/<%= userId %>/update" method="POST" enctype="multipart/form-data">
            <div class="profileimage2">
                <img src="<%= result.imageUrl %>" alt="profileImage" class="img">
            </div>
            <div class="input-container">
                <input type="text" name="nickname" class="form-control" placeholder="ë³€ê²½í•  ë‹‰ë„¤ì„" required>
            </div>
            <div class="input-container-three">
                <input type="text" name="city" class="form-control2" placeholder="ì‹œë„">
                <input type="text" name="district" class="form-control2" placeholder="ì‹œêµ°êµ¬">
                <input type="text" name="town" class="form-control2" placeholder="ìë©´ë™">
            </div>
            <div class="input-container">
                <input type="text" name="detail" class="form-control" placeholder="ìƒì„¸ì£¼ì†Œ" required>
            </div>
            <div class="input-container">
                <input type="file" name="profileImage" class="form-control">
            </div>
            <button type="button" onclick="closePopup()" id="popupButton">ì·¨ì†Œ</button>
            <button type="submit" id="popupButton">ì €ì¥</button>
        </form>
    </div>

    <script>
        function showPopup() {
            document.getElementById('popup').style.display = 'block';
            document.getElementById('popup-bg').style.display = 'block';
        }
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
            document.getElementById('popup-bg').style.display = 'none';
        }
    </script>
</body>
</html>
